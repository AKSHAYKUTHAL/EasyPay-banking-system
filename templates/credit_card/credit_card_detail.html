{% extends 'partials/dashboard_base.html' %}
{% load static %}
{% load humanize %}
{% block content  %}



    <!-- Dashboard Section start -->
    <section class="dashboard-section body-collapse">
        <div class="overlay pt-120">
            <div class="container-fruid">
                <div class="row">
                    <div class="col-xl-11 col-lg-11">
                        <div class="section-content">

                            <div class="transactions-popup">
                                <div class="container-fruid">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div>
                                                <div class="modal-dialog modal-dialog-centered">
                                                    <div class="modal-content">
                                                        <div class="modal-header justify-content-between">
                                                            <h5>Credit Card</h5>
                                                            <a href="#" onclick="location.href = document.referrer; return false;"><i class="fa fa-arrow-left fa-2x" aria-hidden="true"></i></a>
                                                        </div>
                                                        <div class="main-content">
                                                            <div class="row">
                                                                <div class="col-sm-5 text-center">
                                                                    <div class="icon-area p-3">
                                                                        <div class="col-12">
                                                                            <div class="card__main" style="height: 210px;">
                                                                                <div class="{% if credit_card.card_type == 'rupay' %}Front_card{% endif %}    {% if credit_card.card_type == 'master' %}masterCard{% endif %}    {% if credit_card.card_type == 'visa' %}visaCard{% endif %}">
                                                                                    <div class="top_card"  style="padding: 15px;">
                                                                                        <span class="visa">{{credit_card.card_type|upper}}  <small style="font-weight: lighter; font-size:11px" class="{% if credit_card.card_tier == 'classic' %}classic_card{% endif %}    {% if credit_card.card_type == 'gold' %}gold_card{% endif %}    {% if credit_card.card_type == 'platinum' %}platinum_card{% endif %}   {% if credit_card.card_type == 'signature' %}signature_card{% endif %}  {% if credit_card.card_type == 'infinite' %}infinite_card{% endif %}">{{credit_card.card_tier|upper}}</small> </span>  
                                                                                        <div class="logo">
                                                                                            <img src="{% static 'assets1/images/easypay_logo.png' %}" alt="logo">
                                                                                            <div class="image-container" style="display: flex;">
                                                                                                <img src="{% static 'assets1/images/icon/chip.png' %}"  alt="" style="width: 40px; height: 35px; margin-left: 75px; margin-top: 25px;">  
                                                                                                <img src="{% static 'assets1/images/icon/sigmal_icon.png' %}"  alt="" style="width: 18px; height: 28px; margin-left: 3px;  margin-top: 28px;">    
                                                                                            </div>                                                             
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="middle_card">
                                                                                    </div>
                                                                                    <div class="bottom_card">
                                                                                        <div class="card_info">
                                                                                            <div class="card_holder_name" style="text-align: left;">₹ {{credit_card.amount|intcomma }} </div>                                  
                                                                                            <div class="card_number">{{credit_card.format_card_number}}</div>
                                                                                            <div class="card_holder_name" style="text-align: left;">{{credit_card.name}}</div>
                                                                                        </div>
                                                                                        <div class="card_info">
                                                                                        <div class="card_holder_info" style="margin-top: 60px;">
                                                                                            <span class="expire_month" >{{credit_card.month}}</span>
                                                                                            <span class="slash">/</span>
                                                                                            <span class="expire_year">{{credit_card.year_in_two_digits}}</span>
                                                                                        </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div><br><br>
                                                                                <div class= " {% if credit_card.card_type == 'rupay' %}Front_card{% endif %}    {% if credit_card.card_type == 'master' %}masterCard{% endif %}    {% if credit_card.card_type == 'visa' %}visaCard{% endif %}" >
                                                                                    <p style="font-size:10px;color: white; text-shadow:2px 4px 3px rgba(0, 0, 0, 0.3);">For customer service call, +91-896-789-4523 or +48-579-169-168</p>
                                                                                    <div class="top_card">
                                                                                        <span class="black_strip_back"></span><br><br><br>
                                                                                        <div class="cvv_strip_back">
                                                                                            <span class="" style="align-items: right; margin-left: 230px;">{{credit_card.cvv}}</span>
                                                                                        </div>
                                                                                    </div>
                                                                                    <p style="font-size:10px;color: white; text-shadow:2px 4px 3px rgba(0, 0, 0, 0.3);">Card for electronic use only. Not valid without cardholder's signature.</p>

                                                                                    <div class="bottom_card">
                                                                                        <div class="flex">
                                                                                        <span class="sticker"></span>
                                                                                        <div class="logo1">
                                                                                            <span></span>
                                                                                            <span></span>
                                                                                            <span></span>
                                                                                        </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class="right-area">
                                                                        <div class="d-flex justify-content-between">
                                                                            <span style="font-size: larger;"><b>Credit Card Details</b></span>
                                                                            <button type="button" class="reg btn btn-success mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#show_pin_number">
                                                                                Card Pin Number
                                                                            </button>
                                                                        </div>
                                                                        <ul class="payment-details">
                                                                            <li>
                                                                                <span>Current Amount</span>
                                                                                <span>₹ {{credit_card.amount|intcomma}}</span>
                                                                            </li>
                                                                            <li>
                                                                                <span>Name of holder</span>
                                                                                <span>{{credit_card.name|title}}</span>
                                                                            </li>
                                                                            <li>
                                                                                <span>Card Type</span>
                                                                                <span>{{credit_card.card_type|upper}}</span>
                                                                            </li>
                                                                            <li>
                                                                                <span>Card Number</span>
                                                                                <span>{{credit_card.format_card_number}}</span>
                                                                            </li>
                                                                            <li>
                                                                                <span>Expiry Month & Year</span>
                                                                                <span>{{credit_card.month}}/{{credit_card.year}}</span>
                                                                            </li>
                                                                            <li>
                                                                                <span>CVV</span>
                                                                                <span>{{credit_card.cvv}}</span>
                                                                            </li>
                                                                            <li>
                                                                                <span>Card Status</span>
                                                                                {% if credit_card.card_status == True %}
                                                                                <span style="color: green;">Active</span>
                                                                                {% else %}
                                                                                <span style="color: red;">In-Active</span>
                                                                                {% endif %}
                                                                            </li>
                                                                            <li>
                                                                                <div class="">
                                                                                    {% if credit_card.card_status == True %}
                                                                                        <button type="button" class="reg btn btn-primary w-100 mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#addcardMod">
                                                                                            Fund Card
                                                                                        </button>  
                                                                                        <button type="button" class="reg btn btn-success w-100 mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#withdraw_fund">
                                                                                            Withdraw
                                                                                        </button>
                                                                                        <button type="button" class="reg btn btn-warning w-100 mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#deactivate_card">
                                                                                            De-Activate
                                                                                        </button>   
                                                                                        <button type="button" class="reg btn btn-danger w-100 mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#delete_card">
                                                                                            Delete Card
                                                                                        </button>
                                                                                        {% else %}
                                                                                        <button type="button" class="reg btn btn-success w-100 mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#deactivate_card">
                                                                                            Activate
                                                                                        </button>
                                                                                        <button type="button" class="reg btn btn-danger w-100 mb-2" style="border-radius: 15px;" data-bs-toggle="modal" data-bs-target="#delete_card">
                                                                                            Delete Card
                                                                                        </button>
                                                                                    {% endif %}
                                                                                </div>    
                                                                               
                                                                                                                                                  
                                                                            </li>
                                                                        </ul>
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>
    <!-- Dashboard Section end -->
 <!-- Fund credit card Popup start -->
 <div class="add-card">
    <div class="container-fruid">
        <div class="row">
            <div class="col-lg-6">
                <div class="modal fade" id="addcardMod" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header justify-content-between">
                                <h6>Fund Credit Card</h6>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <form action="{% url 'core:fund_credit_card' credit_card.credit_card_id %}" method="POST">
                                {% csrf_token %}
                                <div class="row justify-content-center">
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="cardNumber">Card Number</label>
                                            <input type="text" id="cardNumber" value="{{ credit_card.format_card_number }}" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="cardHolder">Card Holder</label>
                                            <input type="text" id="cardHolder" value="{{ credit_card.name|title }}" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="month">PayEasy Available Balance</label>
                                            <input type="text" id="month" value="₹{{ account.account_balance|intcomma }}" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="year">Enter Amount</label>
                                            <input type="number" name="funding_amount"  id="funding_amount" placeholder="500" inputmode="decimal" pattern="[0-9]*[.,]?[0-9]*"> 
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="year">Enter your Fund transfer Pin Number</label>
                                            <input type="number" name="fund_transfer_pin_number"  id="amount" placeholder="">
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="btn-border w-100">
                                            <button type="submit" class="cmn-btn w-100" style="background-color: #3B71CA;">Confirm Transaction</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Add to credit Card Popup start -->



 <!-- Withdraw from credit Card Popup start -->
 <div class="add-card">
    <div class="container-fruid">
        <div class="row">
            <div class="col-lg-6">
                <div class="modal fade" id="withdraw_fund" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header justify-content-between">
                                <h6>Withdraw from Card</h6>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <form action="{% url 'core:withdraw_fund_from_credit_card' credit_card.credit_card_id %}" method="POST">
                                {% csrf_token %}
                                <div class="row justify-content-center">
                                    
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="month">Card's Available Balance</label>
                                            <input type="text" id="month" value="{{ credit_card.amount|intcomma }}" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="year">Enter Amount</label>
                                            <input type="number" name="withdraw_amount" id="amount" placeholder="500">
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="year">Enter Card Pin Number</label>
                                            <input type="number" name="card_pin_number" id="amount" placeholder="">
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="btn-border w-100">
                                            <button type="submit" class="cmn-btn w-100"  style="background-color: #14A44D;">Confirm Transaction</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Withdraw from credit card Popup start -->

<!-- de-activate card start -->
<div class="add-card">
    <div class="container-fruid">
        <div class="row">
            <div class="col-lg-6">
                <div class="modal fade" id="deactivate_card" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header justify-content-between">
                                <h6>De-activate Credit card</h6>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <form action="{% url 'core:deactivate_credit_card' credit_card.credit_card_id %}" method="POST">
                                {% csrf_token %}
                                <div class="row justify-content-center">
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="cardNumber">Card Number</label>
                                            <input type="text" id="cardNumber" value="{{ credit_card.format_card_number }}" readonly>                                        </div>
                                        <div class="single-input">
                                            <label for="cardNumber">Validity</label>
                                            <input type="text" id="cardNumber" value="{{credit_card.month}}/{{credit_card.year}}" readonly>                                        </div>
                                        <div class="single-input">
                                            <label for="cardNumber" >Card Pin Number</label>
                                            <input type="text" id="cardNumber" name="card_pin_number" placeholder="Enter your card Pin Number">
                                        </div>
                                    <div class="col-12">
                                        {% if credit_card.card_status == True %}
                                            <div class="btn-border w-100">
                                                <button type="submit" class="cmn-btn w-100"  style="background-color: #E4A11B;">De-Activate</button>
                                            </div>
                                        {% else %}
                                            <div class="btn-border w-100">
                                                <button type="submit" class="cmn-btn w-100"  style="background-color:green;">Activate</button>
                                            </div> 
                                        {% endif %}
                                            
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- de-activate card end -->

<!-- delete card start -->
<div class="add-card">
    <div class="container-fruid">
        <div class="row">
            <div class="col-lg-6">
                <div class="modal fade" id="delete_card" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header justify-content-between">
                                <h6>De-activate Credit card</h6>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <form action="{% url 'core:delete_credit_card' credit_card.credit_card_id %}" method="POST">
                                {% csrf_token %}
                                <div class="row justify-content-center">
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="cardNumber">Card Number</label>
                                            <input type="text" id="cardNumber" value="{{ credit_card.format_card_number }}" readonly>                                        </div>
                                        <div class="single-input">
                                            <label for="cardNumber">Validity</label>
                                            <input type="text" id="cardNumber" value="{{credit_card.month}}/{{credit_card.year}}" readonly>                                        </div>
                                        <div class="single-input">
                                            <label for="cardNumber" >Card Pin Number</label>
                                            <input type="text" id="cardNumber" name="card_pin_number"placeholder="Enter your card Pin Number">
                                        </div>
                                    <div class="col-12">
                                        <div class="btn-border w-100">
                                            <button type="submit" class="cmn-btn w-100" style="background-color: #DC4C64;">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- delete card end -->
<!-- show pin card start -->
<div class="add-card">
    <div class="container-fruid">
        <div class="row">
            <div class="col-lg-6">
                <div class="modal fade" id="show_pin_number" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header justify-content-between">
                                <h6>Card Pin Number</h6>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <form action="" method="POST">
                                {% csrf_token %}
                                <div class="row justify-content-center">
                                    <div class="col-md-12">
                                        <div class="single-input">
                                            <label for="cardNumber">Card Number</label>
                                            <input type="text" id="cardNumber" value="{{ credit_card.format_card_number }}" readonly>                                        </div>
                                        <div class="single-input">
                                            <label for="cardNumber">Validity</label>
                                            <input type="text" id="cardNumber" value="{{credit_card.month}}/{{credit_card.year}}" readonly>                                        </div>
                                        <div class="single-input">
                                            <label for="cardNumber" >Card Pin Number</label>
                                            <input type="text" id="cardNumber" name="card_pin_number" value="{{credit_card.card_pin_number}}" readonly>
                                        </div>
                                    <div class="col-12">
                                        <div class="btn-border w-100">
                                            <button type="submit" class="cmn-btn w-100" style="background-color:green;">Okay</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- delete card end -->
{% endblock content %}